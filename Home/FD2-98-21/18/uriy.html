<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Modal default MVC</title>
	<link href="https://fonts.googleapis.com/css?family=Exo+2" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container" id="container">

	<h1>Создание уже и не такого простого модального окошка!</h1>

	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
	<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam fuga sunt voluptas, ullam, sed consequuntur ab illo veniam ad totam alias voluptatibus sequi officiis, unde autem reiciendis magnam labore voluptatum?</p>
	<p class="btn"><a href="#" id="modal-open" class="modal-open" title="Покажите мне модальное окошко">Открыть окно</a></p>

	<div class="modal-data"></div>
	<p class="btn"><a href="#" id="clear-data" class="clear-data" style="display: none;">Очистить данные</a></p>


<div class="modal-overlay modal_closed" id="modal-overlay"></div>
<div class="modal modal_closed" id="modal">
	<header class="modal__header">
		<a href="#" class="modal__close" id="modal-close" title="Закрыть модальное окно">Закрыть</a>
		<h2>Введите данные</h2>
	</header>

	<main class="modal__content">
		<div class="form-field">
			<label for="name">Ваше имя:</label>
			<input required class="input__default" type="text" id="name" name="name">
		</div>
		<div class="form-field">
			<label>Ваш день рождения:</label>
			<input required type="number" class="input__date-birth" id="birth-day" name="name" placeholder="День"> -
			<input required type="number" class="input__date-birth" id="birth-month" name="name" placeholder="Месяц"> -
			<input required type="number" class="input__date-birth" id="birth-year" name="name" placeholder="Год">
		</div>
	</main>

	<footer class="modal__footer">
		<button id="modal-cancel" class="modal__cancel" title="Отмена">Отмена</button>
		<button id="modal-save" class="modal__save" title="Сохранить">Сохранить данные</button>
	</footer>


</div>

</div>

<script>



    /* ------- begin model ------- */
    function ModalModel () {
        let myModalContainer = null;
        let myModalView = null;
        let userData = {};

        this.init = function(view) {

            myModalView = view;

        }

        this.openModal = function() {

            myModalView.show();

        }

        this.closeModal = function() {

            myModalView.hide();
        }

        this.saveModalData = function() { //получить данные из модалки и сохранить
        }

        this.storeData = function() { // сохранить данные в localStorage, а если не доступно, то в cookies
        }

        this.getData = function() { //достать данные из хранилища
        }

        this.updateData = function() {
        }

        this.clearData = function() { //очистить данные в хранилище
        }

        this.clearForm = function() { //очистить данные в форме
        }

    }




    /* ------- begin view -------- */


    function ModalView() {
        let myModal = null;
        let myModalOverlay = null;
        let myModalContainer = null;


        this.init = function(field) {

            myModalContainer = field;

            myModal = myModalContainer.querySelector('.modal');
            myModalOverlay = myModalContainer.querySelector('.modal-overlay');


        }


        this.show = function () {

            // console.log(modalWindow);

            myModal.classList.remove('modal_closed');
            myModalOverlay.classList.remove('modal_closed');

        }


        this.hide = function () {

            myModal.classList.add('modal_closed');
            myModalOverlay.classList.add('modal_closed');
        }


        this.printViewData = function () { // вывести данные из хранилища в div.modal-data
        }

        this.clearViewData = function () { // очистить или выдать дефолтное сообщение только для div.modal-data
        }

    }








    /* ----- begin controller ---- */

    function ModalController () {

        let myModalModel = null;
        let myModalContainer = null;


        this.init = function(model, field) { // получаем кнопки и вешаем обработчики

            myModalModel = model;
            myModalContainer = field;


            const buttonOpen = myModalContainer.querySelector(".modal-open");
            buttonOpen.addEventListener("click", this.openModal);

            const buttonClose = myModalContainer.querySelector(".modal__close");
            buttonClose.addEventListener("click", this.hideModal);

            const buttonCancel = myModalContainer.querySelector(".modal__cancel");
            buttonCancel.addEventListener("click", this.hideModal);

            const buttonSave = myModalContainer.querySelector(".modal__save");
            buttonSave.addEventListener("click", this.saveModal);

            // console.log(buttonClose)

        }

        this.openModal = function () {

            myModalModel.openModal();
        }

        this.hideModal = function () {

            myModalModel.closeModal();
        }

        this.saveModal = function () {

            const inputName = myModalContainer.querySelector(".input__default");
            const inputBirth = myModalContainer.querySelectorAll(".input__date-birth");

            myModalModel.saveModalData(inputName, inputBirth);

            // console.log(inputBirth);





        }

        this.clearData = function () {
        }
    }




    // глобальная инициализация
    const appModalModel = new ModalModel();
    const appModalView = new ModalView();
    const appModalController = new ModalController();


    //вызвать init-методы...

    const containerElem = document.getElementById("container");

    appModalModel.init(appModalView);
    appModalView.init(containerElem);
    appModalController.init(appModalModel, containerElem);



</script>
</body>
</html>