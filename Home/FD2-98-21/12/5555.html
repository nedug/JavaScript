<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Title</title>
	<style>
       .field {
           margin: 50px;
           background-color: #eee2a5;
           border: 1px solid black;
           position: relative;
       }
       #ball {
           background-color: #f3445b;
           border-radius: 50%;
           position: absolute;

           top: 200px;
           left: 200px;
       }
       #leftRacket {
           background-color: #6cf189;
           position: absolute;
           /*top: 50px;*/
           /*left: 0px;*/
       }
       #rightRacket {
           background-color: #6c9df1;
           position: absolute;
           /*top: 200px;*/
           /*right: 0px;*/
       }
	</style>
</head>
<body>

<script>

    const widthField = 850;
    const heightField = 500;

    const widthHeightBall = heightField * 0.09;

    const widthRacket = heightField * 0.03;
    const heightRacket = heightField * 0.28;


    let field = document.createElement('div');
    field.className = 'field';
    field.style.cssText = `width: ${widthField}px; height: ${heightField}px;`;
    document.body.prepend(field);


    let ball = document.createElement('div');
    ball.setAttribute('id', 'ball');
    ball.style.cssText = `width: ${widthHeightBall}px; height: ${widthHeightBall}px;`;
    field.append(ball);

    let leftRacket = document.createElement('div');
    leftRacket.setAttribute('id', 'leftRacket');

    leftRacket.setAttribute('tabindex', '-1');

    leftRacket.style.cssText = `width: ${widthRacket}px; height: ${heightRacket}px;`;
    field.append(leftRacket);

    let rightRacket = document.createElement('div');
    rightRacket.setAttribute('id', 'rightRacket');
    rightRacket.style.cssText = `width: ${widthRacket}px; height: ${heightRacket}px;`;
    field.append(rightRacket);


    let leftRacketInfo = {
        posX : 0,
        posY : 350,
        speedY : 4,
        width : widthRacket,
        height: heightRacket,

        updateRacket: function() {

            leftRacket.style.left = this.posX + "px";
            leftRacket.style.top = this.posY + "px";
        }
    }

    let rightRacketInfo = {
        posX : 0,
        posY : 250,
        speedY : 4,
        width : widthRacket,
        height: heightRacket,

        updateRacket: function() {

            rightRacket.style.right = this.posX + "px";
            rightRacket.style.top = this.posY + "px";
        }
    }

    leftRacketInfo.updateRacket();

    rightRacketInfo.updateRacket();


    let timer1;
    let timer2;

    let timer3;
    let timer4;


    document.body.addEventListener('keydown', leftRacketUp, {once:true});

    function leftRacketUp(event) {

        console.log(event.code)

        if (event.code === 'ShiftLeft') {

            timer1 = requestAnimationFrame(up);

            function up() {

                leftRacketInfo.posY = leftRacketInfo.posY - leftRacketInfo.speedY;
                if (leftRacketInfo.posY < 0) {
                    leftRacketInfo.posY = 0;
                }

                leftRacketInfo.updateRacket();

                timer1 = requestAnimationFrame(up);
            }
        }


        if (event.code === 'ControlLeft') {

            timer2 = requestAnimationFrame(down);

            function down() {

                leftRacketInfo.posY = leftRacketInfo.posY + leftRacketInfo.speedY;
                if (leftRacketInfo.posY + leftRacketInfo.height > heightField) {
                    leftRacketInfo.posY = heightField - leftRacketInfo.height;
                }
                leftRacketInfo.updateRacket();

                timer2 = requestAnimationFrame(down);
            }
        }




        if (event.code === 'ArrowUp') {

            timer3 = requestAnimationFrame(upp33);

            function upp33() {

                rightRacketInfo.posY = rightRacketInfo.posY - rightRacketInfo.speedY;
                if (rightRacketInfo.posY < 0) {
                    rightRacketInfo.posY = 0;
                }

                rightRacketInfo.updateRacket();

                timer3 = requestAnimationFrame(upp33);
            }
        }


        if (event.code === 'ArrowDown') {

            timer4 = requestAnimationFrame(down2);

            function down2() {

                rightRacketInfo.posY = rightRacketInfo.posY + rightRacketInfo.speedY;
                if (rightRacketInfo.posY + rightRacketInfo.height > heightField) {
                    rightRacketInfo.posY = heightField - rightRacketInfo.height;
                }
                rightRacketInfo.updateRacket();

                timer4 = requestAnimationFrame(down2);
            }
        }



    }






    document.body.addEventListener('keyup', leftRacket10);

    function leftRacket10(event) {

        if (event.code === 'ShiftLeft') {

            cancelAnimationFrame(timer1);
            addEventListener('keydown', leftRacketUp, {once:true});
        }
        if (event.code === 'ControlLeft') {

            cancelAnimationFrame(timer2);
            addEventListener('keydown', leftRacketUp, {once:true});
        }

        if (event.code === 'ArrowUp') {

            cancelAnimationFrame(timer3);
            addEventListener('keydown', leftRacketUp, {once:true});

        }

        if (event.code === 'ArrowDown') {

            cancelAnimationFrame(timer4);
            addEventListener('keydown', leftRacketUp, {once:true});

        }



    }


</script>

</body>
</html>